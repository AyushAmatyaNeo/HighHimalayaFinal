<?php
$this->headScript()->appendFile($this->basePath('js/setup/employee/view.js'))
    ->appendFile($this->basePath('assets/global/plugins/jsPDF-master/dist/jspdf.debug.js'));
?>

<?php
/**
 * Personal Information
 */
$companyId = $formOne->get('companyId');
$employeeCode = $formOne->get("employeeCode");
$firstName = $formOne->get("firstName");
$middleName = $formOne->get("middleName");
$lastName = $formOne->get("lastName");
$nameNepali = $formOne->get("nameNepali");
$birthDate = $formOne->get('birthDate');
$genderId = $formOne->get('genderId');
$bloodGroupId = $formOne->get('bloodGroupId');
$religionId = $formOne->get('religionId');
$socialActivity = $formOne->get('socialActivity');
$telephoneNo = $formOne->get('telephoneNo');
$mobileNo = $formOne->get('mobileNo');
$extensionNo = $formOne->get('extensionNo');
$emailOfficial = $formOne->get('emailOfficial');
$emailPersonal = $formOne->get('emailPersonal');
$socialNetwork = $formOne->get('socialNetwork');
$countryId = $formOne->get('countryId');

/**
 * Emergency Contact Information
 */
$emergContactName = $formOne->get('emergContactName');
$emergContactNo = $formOne->get('emergContactNo');
$emergContactAddress = $formOne->get('emergContactAddress');
$emergContactRelationship = $formOne->get('emergContactRelationship');


/*
 * Address Information
 */
$addrPermHouseNo = $formOne->get('addrPermHouseNo');
$addrPermWardNo = $formOne->get('addrPermWardNo');
$addrPermStreetAddress = $formOne->get('addrPermStreetAddress');
$addrPermVdcMunicipalityId = $formOne->get('addrPermVdcMunicipalityId');
$addrPermDistrictId = $formOne->get('addrPermDistrictId');
$addrPermZoneId = $formOne->get('addrPermZoneId');
$addrTempHouseNo = $formOne->get('addrTempHouseNo');
$addrTempWardNo = $formOne->get('addrTempWardNo');
$addrTempStreetAddress = $formOne->get('addrTempStreetAddress');
$addrTempVdcMunicipalityId = $formOne->get('addrTempVdcMunicipalityId');
$addrTempDistrictId = $formOne->get('addrTempDistrictId');
$addrTempZoneId = $formOne->get('addrTempZoneId');
$addrPermProvinceId = $formOne->get('addrPermProvinceId');
$addrTempProvinceId = $formOne->get('addrTempProvinceId');

$famFatherName = $formTwo->get('famFatherName');
$famFatherOccupation = $formTwo->get('famFatherOccupation');
$famMotherName = $formTwo->get('famMotherName');
$famMotherOccupation = $formTwo->get('famMotherOccupation');
$famGrandFatherName = $formTwo->get('famGrandFatherName');
$famGrandMotherName = $formTwo->get('famGrandMotherName');
$maritualStatus = $formTwo->get('maritualStatus');
$famSpouseName = $formTwo->get('famSpouseName');
$famSpouseOccupation = $formTwo->get('famSpouseOccupation');
$famSpouseBirthDate = $formTwo->get('famSpouseBirthDate');
$famSpouseWeddingAnniversary = $formTwo->get('famSpouseWeddingAnniversary');

$idCardNo = $formThree->get('idCardNo');
$idLbrf = $formThree->get('idLbrf');
$idBarCode = $formThree->get('idBarCode');
$idProvidentFundNo = $formThree->get('idProvidentFundNo');
$idDrivingLicenseNo = $formThree->get('idDrivingLicenseNo');
$idDrivingLicenseType = $formThree->get('idDrivingLicenseType');
$idDrivingLicenseExpiry = $formThree->get('idDrivingLicenseExpiry');
$idThumbId = $formThree->get('idThumbId');
$idPanNo = $formThree->get('idPanNo');
$ssfNo = $formThree->get('ssfNo');
$idAccountId = $formThree->get('idAccountId');
$idRetirementNo = $formThree->get('idRetirementNo');
$idCitizenshipNo = $formThree->get('idCitizenshipNo');
$idCitizenshipIssueDate = $formThree->get('idCitizenshipIssueDate');
$idCitizenshipIssuePlace = $formThree->get('idCitizenshipIssuePlace');
$idPassportNo = $formThree->get('idPassportNo');
$idPassportExpiry = $formThree->get('idPassportExpiry');

$joinDate = $formFour->get('joinDate');
$grossSalary = $formFour->get('grossSalary');
$salary = $formFour->get('salary');
$allowance = $formFour->get('allowance');
$salaryPf = $formFour->get('salaryPf');
$gratuity = $formFour->get('gratuity');
$serviceTypeId = $formFour->get('serviceTypeId');
$positionId = $formFour->get('positionId');
$designationId = $formFour->get('designationId');
$departmentId = $formFour->get('departmentId');
$branchId = $formFour->get('branchId');

$employeeType = $formFour->get('employeeType');
$employeeTypeValue = [
    'R' => 'Regular',
    'C' => 'Contract'
];
$employeeType->setValueOptions($employeeTypeValue);


$academicDegreeId = $formSix->get('academicDegreeId');
$academicUniversityId = $formSix->get('academicUniversityId');
$academicProgramId = $formSix->get('academicProgramId');
$academicCourseId = $formSix->get('academicCourseId');
$rankType = $formSix->get('rankType');
$rankValue = $formSix->get('rankValue');
$passedYr = $formSix->get('passedYr');


$expOrgName = $formSeven->get('organizationName');
$orgType = [
    'Financial' => 'Financial',
    'Non-Financial' => 'Non-Financial'
];
$expOrgType = $formSeven->get('organizationType');

$expOrgType->setValueOptions($orgType);
$expPosition = $formSeven->get('position');
$expFromDate = $formSeven->get('fromDate');
$expToDate = $formSeven->get('toDate');


$traName = $formEight->get('trainingName');
$traDescription = $formEight->get('description');
$traFromDate = $formEight->get('fromDate');
$traToDate = $formEight->get('toDate');

$empId = isset($id) ? $id : -1;
?>

<?php
if ($this->messages) {
    print '<ul class="help-block bg-danger" style="background:#f3e250;">';
    foreach ($this->messages as $message) {
        print '<li>' . $message . '</li>';
    }
    print '</ul>';
}
?>
<style>
    /* General Styles */
    .personal-info {
        background: #fff;
        padding: 25px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
    }

    .personal-info h2 {
        font-weight: 600;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        font-size: 2rem;
    }

    .personal-info h2 i {
        color: #007bff;
        margin-right: 10px;
    }

    .profile-img-box {
        text-align: center;
        margin-bottom: 20px;
    }

    .profile-img-box img {
        width: 130px;
        height: 130px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #007bff;
    }

    .profile-img-box .profilepic-label {
        display: block;
        margin-top: 10px;
        font-weight: 600;
        font-size: 1.5rem;
        float: none;
    }

    .employee-detail-label {
        font-weight: 500;
        color: #555;
    }

    .employee-detail-value {
        font-weight: 600;
        color: #333;
    }

    .employee-row {
        margin-bottom: 12px;
    }

    .print-btn {
        margin-bottom: 20px;
        float: right;
    }

    @media print {
        .print-btn {
            display: none;
        }

        body {
            background: #fff;
        }
    }
</style>

<style>
    /* Address Card Styles */
    .address-info {
        background: #fff;
        padding: 20px 25px;
        border-radius: 10px;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        margin-bottom: 25px;
    }

    .address-info h2 {
        font-weight: 600;
        font-size: 2rem;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
    }

    .address-info h2 i {
        color: #28a745;
        margin-right: 10px;
    }

    .address-row {
        margin-bottom: 12px;
        display: flex;
    }

    .address-label {
        font-weight: 500;
        color: #555;
        width: 45%;
    }

    .address-value {
        font-weight: 600;
        color: #333;
        width: 55%;
    }

    @media print {
        .no-print {
            display: none !important;
        }
    }
</style>

<style>
    @page {
        size: A4;
        margin: 8mm;
    }

    @media print {

        body {
            margin: 0 !important;
            padding: 0 !important;
            font-size: 12px !important;
        }

        /* hide buttons */
        .btn,
        .no-print,
        .print-btn {
            display: none !important;
        }

        /* prevent breaking sections */
        .print-section {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
            margin-bottom: 10px !important;
        }

        /* make image column full width in print */
        .personal-info .row>.col-md-3:first-child {
            width: 100% !important;
            max-width: 100% !important;
            flex: 0 0 100% !important;
            text-align: center !important;
        }

        /* keep other columns below the image (optional) */
        .personal-info .row>.col-md-3:not(:first-child) {
            width: 33.333% !important;
            max-width: 33.333% !important;
            flex: 0 0 33.333% !important;
        }

        /* optional: image bigger in print */
        .profile-img-box img {
            max-width: 200px;
            max-height: 200px;
        }

        /* bootstrap grid fix */
        .row {
            display: flex !important;
            flex-wrap: wrap !important;
        }

        .col-md-4 {
            flex: 0 0 33.3333% !important;
            max-width: 33.3333% !important;
        }

        .col-md-6 {
            flex: 0 0 50% !important;
            max-width: 50% !important;
        }

        .col-md-12 {
            flex: 0 0 100% !important;
            max-width: 100% !important;
        }

        /* reduce spacing */
        h4,
        h5,
        h6 {
            margin: 4px 0 !important;
        }

        p {
            margin: 2px 0 !important;
        }

        .card,
        .card-body {
            padding: 6px !important;
        }

        /* Gap Reduce */
        .personal-info,
        .address-info {
            padding: 0px 10px;
            margin-bottom: 0px;
        }
    }
</style>

<div class="page-bar">
    <?= $this->navigation('Zend\Navigation\profile')->breadcrumbs()->setMinDepth(0)->setPartial('partial/breadcrumb'); ?>
</div>
<div id="quaConId">
    <div class="row esetup" style="margin-top:10px;">
        <div class="col-md-12" style="">
            <a class="btn btn-success pull-right" href="<?= $this->url("profile", ["action" => "edit"]) ?>/<?php echo $id; ?>/1"> Edit
                <i class="fa fa-edit"></i>
            </a>
        </div>
    </div>
    <div id="rootwizard" class="tabbable-custom">
        <div class="personal-info">
            <button class="btn btn-primary print-btn" onclick="printEmployeeProfile();">
                <i class="fa fa-print"></i> Print
            </button>

            <h2><i class="fa fa-user"></i> Personal Information</h2>

            <div class="row">
                <!-- Profile Image -->
                <div class="col-md-3 text-center">
                    <div class="profile-img-box">
                        <img alt="profile image" src="<?= $this->basePath("uploads/" . $filePath) ?>" />
                        <br>
                        <span class="profilepic-label"><?= $employeeData['FULL_NAME'] ?></span>
                    </div>
                </div>

                <!-- Column 1 -->
                <div class="col-md-3">
                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($firstName) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::FIRST_NAME] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($birthDate) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::BIRTH_DATE] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($companyId) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[Setup\Model\Company::COMPANY_NAME] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($telephoneNo) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::TELEPHONE_NO] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($emailOfficial) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::EMAIL_OFFICIAL] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($employeeCode) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::EMPLOYEE_CODE] ?></div>
                    </div>
                </div>

                <!-- Column 2 -->
                <div class="col-md-3">
                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($middleName) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::MIDDLE_NAME] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($nameNepali) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::NAME_NEPALI] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($countryId) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData['COUNTRY_NAME'] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($bloodGroupId) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData['BLOOD_GROUP_CODE'] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($socialActivity) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::SOCIAL_ACTIVITY] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($emailPersonal) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::EMAIL_PERSONAL] ?></div>
                    </div>
                </div>

                <!-- Column 3 -->
                <div class="col-md-3">
                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($lastName) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::LAST_NAME] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($genderId) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\Gender::GENDER_NAME] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($religionId) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData['RELIGION_NAME'] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($mobileNo) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::MOBILE_NO] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($extensionNo) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::EXTENSION_NO] ?></div>
                    </div>

                    <div class="employee-row d-flex">
                        <div class="employee-detail-label col-6"><?= $this->formLabel($socialNetwork) ?></div>
                        <div class="employee-detail-value col-6"><?= $employeeData[\Setup\Model\HrEmployees::SOCIAL_NETWORK] ?></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Permanent Address -->
        <div class="address-info">
            <h2><i class="fa fa-address-book"></i> Permanent Address</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermZoneId) ?></div>
                        <div class="address-value"><?= $perZoneName ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermProvinceId) ?></div>
                        <div class="address-value"><?= $perProvinceName ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermDistrictId) ?></div>
                        <div class="address-value"><?= $perDistrictName ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermVdcMunicipalityId) ?></div>
                        <div class="address-value"><?= $employeeData['VDC_MUNICIPALITY_NAME'] ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermHouseNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_PERM_HOUSE_NO] ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermWardNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_PERM_WARD_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrPermStreetAddress) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_PERM_STREET_ADDRESS] ?></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Temporary Address -->
        <div class="address-info">
            <h2><i class="fa fa-address-card"></i> Temporary Address</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempZoneId) ?></div>
                        <div class="address-value"><?= $tempZoneName ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempProvinceId) ?></div>
                        <div class="address-value"><?= $tempProvinceName ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempDistrictId) ?></div>
                        <div class="address-value"><?= $tempDistrictName ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempVdcMunicipalityId) ?></div>
                        <div class="address-value"><?= $employeeData['VDC_MUNICIPALITY_NAME_TEMP'] ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempHouseNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_TEMP_HOUSE_NO] ?></div>
                    </div>
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempWardNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_TEMP_WARD_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($addrTempStreetAddress) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ADDR_TEMP_STREET_ADDRESS] ?></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emergency Contact Details -->
        <div class="address-info">
            <h2><i class="fa fa-map-marker"></i> Emergency Contact Details</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($emergContactName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::EMRG_CONTACT_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($emergContactRelationship) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::EMERG_CONTACT_RELATIONSHIP] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($emergContactAddress) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::EMERG_CONTACT_ADDRESS] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($emergContactNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::EMERG_CONTACT_NO] ?></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Family Information -->
        <div class="address-info">
            <h2><i class="fa fa-users"></i> Family Information</h2>
            <div class="row">
                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famFatherName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_FATHER_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famFatherOccupation) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_FATHER_OCCUPATION] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famMotherName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_MOTHER_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famMotherOccupation) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_MOTHER_OCCUPATION] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famGrandFatherName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_GRAND_FATHER_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famGrandMotherName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_GRAND_MOTHER_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($maritualStatus) ?></div>
                        <div class="address-value">
                            <?php
                            if ($employeeData[\Setup\Model\HrEmployees::MARITAL_STATUS] == "M") echo "Married";
                            else if ($employeeData[\Setup\Model\HrEmployees::MARITAL_STATUS] == "U") echo "Unmarried";
                            ?>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famSpouseName) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_SPOUSE_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famSpouseOccupation) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_SPOUSE_OCCUPATION] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famSpouseBirthDate) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_SPOUSE_BIRTH_DATE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($famSpouseWeddingAnniversary) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::FAM_SPOUSE_WEDDING_ANNIVERSARY] ?></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Identification Information -->
        <div class="address-info">
            <h2><i class="fa fa-user-circle"></i> Identification Information</h2>
            <div class="row">

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idCardNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_CARD_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idLbrf) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_LBRF] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idBarCode) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_BAR_CODE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idProvidentFundNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_PROVIDENT_FUND_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idDrivingLicenseNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_DRIVING_LICENCE_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idDrivingLicenseExpiry) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_DRIVING_LICENCE_EXPIRY] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idDrivingLicenseType) ?></div>
                        <div class="address-value">
                            <?php
                            $licenseTypes = json_decode($employeeData[\Setup\Model\HrEmployees::ID_DRIVING_LICENCE_TYPE], true);
                            echo !empty($licenseTypes) ? implode(', ', $licenseTypes) : '-';
                            ?>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idPassportNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_PASSPORT_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idPassportExpiry) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_PASSPORT_EXPIRY] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idThumbId) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_THUMB_ID] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idPanNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_PAN_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idAccountId) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_ACCOUNT_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idRetirementNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_RETIREMENT_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idCitizenshipNo) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_CITIZENSHIP_NO] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idCitizenshipIssueDate) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ID_CITIZENSHIP_ISSUE_DATE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($idCitizenshipIssuePlace) ?></div>
                        <div class="address-value"><?= $employeeData['CITIZENSHIP_ISSUE_PLACE'] ?></div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Status Information -->
        <div class="address-info">
            <h2><i class="fa fa-info-circle"></i> Status Information</h2>
            <div class="row">

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($joinDate) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::JOIN_DATE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($grossSalary) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::GROSS_SALARY] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($salary) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::SALARY] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($allowance) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::ALLOWANCE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($salaryPf) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::SALARY_PF] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($gratuity) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\HrEmployees::GRATUITY] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($serviceTypeId) ?></div>
                        <div class="address-value"><?= $employeeData[Setup\Model\ServiceType::SERVICE_TYPE_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($positionId) ?></div>
                        <div class="address-value"><?= $employeeData[Setup\Model\Position::POSITION_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($designationId) ?></div>
                        <div class="address-value"><?= $employeeData[Setup\Model\Designation::DESIGNATION_TITLE] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($departmentId) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\Department::DEPARTMENT_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($branchId) ?></div>
                        <div class="address-value"><?= $employeeData[\Setup\Model\Branch::BRANCH_NAME] ?></div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="address-row">
                        <div class="address-label"><?= $this->formLabel($employeeType) ?></div>
                        <div class="address-value"><?= $employeeTypeValue[$employeeData[\Setup\Model\HrEmployees::EMPLOYEE_TYPE]] ?></div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Qualification Details -->
        <div class="address-info">
            <h2><i class="fa fa-info-circle"></i> Qualification Details</h2>
            <input type="hidden" name="employeeId" id="employeeId" value="<?= $id ?>">

            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="qualificationTbl">
                    <thead>
                        <tr>
                            <th><?= $this->formLabel($academicDegreeId) ?></th>
                            <th><?= $this->formLabel($academicUniversityId) ?></th>
                            <th><?= $this->formLabel($academicProgramId) ?></th>
                            <th><?= $this->formLabel($academicCourseId) ?></th>
                            <th class="rankwidth"><?= $this->formLabel($rankType) ?></th>
                            <th><?= $this->formLabel($rankValue) ?></th>
                            <th class="passedyr"><?= $this->formLabel($passedYr) ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($empQualificationList as $empQualificationRow): ?>
                            <tr>
                                <td><?= $empQualificationRow['ACADEMIC_DEGREE_NAME'] ?></td>
                                <td><?= $empQualificationRow['ACADEMIC_UNIVERSITY_NAME'] ?></td>
                                <td><?= $empQualificationRow['ACADEMIC_PROGRAM_NAME'] ?></td>
                                <td><?= $empQualificationRow['ACADEMIC_COURSE_NAME'] ?></td>
                                <td>
                                    <?= $empQualificationRow['RANK_TYPE'] === 'GPA' ? 'GPA' : ($empQualificationRow['RANK_TYPE'] === 'PER' ? 'Percentage' : '-') ?>
                                </td>
                                <td><?= $empQualificationRow['RANK_VALUE'] ?></td>
                                <td><?= $empQualificationRow['PASSED_YR'] ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Experience Details -->
        <div class="address-info">
            <h2><i class="fa fa-info-circle"></i> Experience Details</h2>
            <input type="hidden" name="employeeId" id="employeeId" value="<?= $id ?>">

            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="experienceTbl">
                    <thead>
                        <tr>
                            <th><?= $this->formLabel($expOrgType) ?></th>
                            <th><?= $this->formLabel($expOrgName) ?></th>
                            <th><?= $this->formLabel($expPosition) ?></th>
                            <th><?= $this->formLabel($expFromDate) ?></th>
                            <th><?= $this->formLabel($expToDate) ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($empExperienceList as $experience): ?>
                            <tr>
                                <td><?= $experience['ORGANIZATION_TYPE'] ?></td>
                                <td><?= $experience['ORGANIZATION_NAME'] ?></td>
                                <td><?= $experience['POSITION'] ?></td>
                                <td><?= $experience['FROM_DATE'] ?></td>
                                <td><?= $experience['TO_DATE'] ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Training Details -->
        <div class="address-info">
            <h2><i class="fa fa-info-circle"></i> Training Details</h2>
            <input type="hidden" name="employeeId" id="employeeId" value="<?= $id ?>">

            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="trainingTbl">
                    <thead>
                        <tr>
                            <th><?= $this->formLabel($traName) ?></th>
                            <th><?= $this->formLabel($traDescription) ?></th>
                            <th><?= $this->formLabel($traFromDate) ?></th>
                            <th><?= $this->formLabel($traToDate) ?></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($empTrainingList as $training): ?>
                            <tr>
                                <td><?= $training['TRAINING_NAME'] ?></td>
                                <td><?= $training['DESCRIPTION'] ?></td>
                                <td><?= $training['FROM_DATE'] ?></td>
                                <td><?= $training['TO_DATE'] ?></td>
                            </tr>
                        <?php endforeach; ?>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row">
            <!-- Service Status Details -->
            <div class="col-sm-12">
                <div class="address-info">
                    <h2><i class="fa fa-info-circle"></i> Service Status Details</h2>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="serviceStatusTbl">
                            <thead>
                                <tr>
                                    <th>Start Date</th>
                                    <th>End Date</th>
                                    <th>Service Event Type</th>
                                    <th>Service Type</th>
                                    <th>Branch</th>
                                    <th>Department</th>
                                    <th>Designation</th>
                                    <th>Position</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php foreach ($jobHistoryList as $jobHistory): ?>
                                    <tr>
                                        <td><?= $jobHistory['START_DATE_AD'] ?></td>
                                        <td><?= $jobHistory['END_DATE_AD'] ?></td>
                                        <td><?= $jobHistory['SERVICE_EVENT_TYPE_NAME'] ?? '-' ?></td>
                                        <td><?= $jobHistory['TO_SERVICE_NAME'] ?? '-' ?></td>
                                        <td><?= $jobHistory['TO_BRANCH_NAME'] ?? '-' ?></td>
                                        <td><?= $jobHistory['TO_DEPARTMENT_NAME'] ?? '-' ?></td>
                                        <td><?= $jobHistory['TO_DESIGNATION_TITLE'] ?? '-' ?></td>
                                        <td><?= $jobHistory['TO_POSITION_NAME'] ?? '-' ?></td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Document Details -->
            <div class="col-sm-12">
                <div class="address-info">
                    <h2><i class="fa fa-info-circle"></i> Document Details</h2>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="documentTbl">
                            <thead>
                                <tr>
                                    <th>Document Name</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php foreach ($employeeFile as $file): ?>
                                    <tr>
                                        <td><?= $file['FILE_NAME'] ?></td>
                                        <td width="10%">
                                            <a class="btn-delete" href="<?= $this->basePath() . "/uploads/" . $file['FILE_PATH']; ?>" download="<?= $file['FILE_NAME'] ?>" style="height:27px;">
                                                <i class="fa fa-download"></i>
                                            </a>
                                        </td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Relation Details -->
        <div class="row">
            <div class="col-sm-12">
                <div class="address-info">
                    <h2><i class="fa fa-info-circle"></i> Relation Details</h2>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered table-hover no-footer customtbl profile-table-header" id="relationTbl">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Relation</th>
                                    <th>DOB</th>
                                    <th>Dependent</th>
                                    <th>Nominee</th>
                                </tr>
                            </thead>
                            <tbody>
                                <?php foreach ($relationDetails as $relation): ?>
                                    <tr>
                                        <td><?= $relation['PERSON_NAME'] ?></td>
                                        <td><?= $relation['RELATION_NAME'] ?></td>
                                        <td><?= $relation['DOB'] ?></td>
                                        <td><?= ($relation['IS_DEPENDENT'] == 'Y') ? 'Yes' : 'No'; ?></td>
                                        <td><?= ($relation['IS_NOMINEE'] == 'Y') ? 'Yes' : 'No'; ?></td>
                                    </tr>
                                <?php endforeach; ?>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script>
    function printEmployeeProfile() {
        var originalTitle = document.title;

        var empName = "<?php echo addslashes($employeeData['FULL_NAME']); ?>";
        empName = empName
            .trim()
            .replace(/\s+/g, "_") // spaces â†’ _
            .replace(/[^a-zA-Z0-9_]/g, ""); // remove special chars

        document.title = empName + "_Employee_Profile";

        window.print();

        // Restore title after print
        setTimeout(function() {
            document.title = originalTitle;
        }, 1000);
    }
</script>